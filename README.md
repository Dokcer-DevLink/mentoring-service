<div align="center">
<h1>Mentoring-Service</h1>
<h3> 멘토링 신청 및 멘토링 관리를 담당하는 서비스 

멘토링 서비스</h3>
</div>

<br>
<br>


## Architecture
<img width="9116" alt="아키텍처" src="https://github.com/Dokcer-DevLink/mentoring-service/assets/80077569/b4d1f6a3-e31c-4ca2-9800-ededc7d267d0">

<br>
<br>

## Description

### - 멘토링 CRUD
멘토링 신청이 들어오면 멘토링 신청 테이블에 저장된다. 멘토링 신청에 대한 멘토링 수락 요청이 들어오면 멘토링이 생성되어 멘토링 테이블에 저장된다. 

### - Kafka 연동
멘토링 신청, 멘토링 신청 수락, 멘토링 신청 거절 요청이 들어오먄 Kafka 메시지 브로커로 메시지를 전달하여 알림 서비스(Notification-Service)로 전달한다. 

### - 음성-텍스트 변환 기능
멘토링 과정을 녹음한 파일을 업로드하면 대화내용을 텍스트로 변환해주는 기능이다. 최초 기획은 음성파일을 Naver Speech API로 변환하고 변환된 내용을 Naver Summary API로 요약할 생각이었다. 그래서 Command Pattern과 Factory Pattern을 활용하여 한 가지 인터페이스로 두 가지 API를 모두 사용가능 하도록 설계하였다. 그런데 생각보다 Naver Summary API가 성능이 나오지 않았고 다른 Summary API는 한국어 인식능력이 떨어졌다. 그래서 Summary 기능은 제외하고 변환된 텍스트 파일을 파싱하여 클라이언트로 전달하는 방식을 선택하였다.  

### - 음성파일 S3 버킷에 업로드
Base64 방식으로 인코딩된 음성파일을 디코딩하여 S3 버킷에 업로드하여 관리하였다.

### - QueryDSL 사용
간단한 쿼리는 Spring Data JPA로 자동생성하였고 복잡한 쿼리는 타입 안정성과 동적 쿼리 생성을 고려하여 QueryDSL를 사용하였다.

### - 트랜잭션 동기화 
멘토링이 생성되면 서비스간 통신으로 프로필 서비스에는 스케줄이 생성된다. 서로 다른 서비스에서 트랜잭션이 발생하므로 트랜잭션 발생 순서로 이를 제어하였다. @Transactional이 선언된 메소드에서 멘토링 저장을 먼저 진행한다. 그리고 서비스간 통신으로 프로필 서비스에서 스케줄을 생성한다. 이와 같이 구성하면, 멘토링 저장 트랜잭션이 실패하면 스케줄 생성 트랜잭션으로 이어지지 않고 스케줄 생성 트랜잭션이 실패하면 멘토링 저장 트랜잭션은 롤백된다.